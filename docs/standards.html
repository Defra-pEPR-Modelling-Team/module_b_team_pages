<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Coding Standards</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
  <link rel="icon" type="image/png" href="favicon.ico"/>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Module B Team Pages</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Team Info
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="organisation.html">Organisation</a>
    </li>
    <li>
      <a href="sprint.html">Sprint Timings</a>
    </li>
    <li>
      <a href="meetings.html">Meeting Etiquette</a>
    </li>
    <li>
      <a href="glossary.html">Acronyms</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    How to...
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="setup.html">...set up Github</a>
    </li>
    <li>
      <a href="edit.html">...edit Github code</a>
    </li>
    <li>
      <a href="requests.html">...pull request</a>
    </li>
    <li>
      <a href="review.html">...code review</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Coding
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="sce.html">Coding Environment</a>
    </li>
    <li>
      <a href="standards.html">Coding Standards</a>
    </li>
    <li>
      <a href="learning.html">Learning</a>
    </li>
  </ul>
</li>
<li>
  <a href="links.html">Useful Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Coding Standards</h1>

</div>


<div id="linting-code" class="section level2">
<h2>Linting Code</h2>
<p>Currently we are using the <a
href="https://style.tidyverse.org/"><code>tidyverse</code> style
guide</a>, which you can use through the <code>lintr</code> and
<code>styler</code> packages: - <code>lintr</code>: You can use the
‘Lint current file’ command in the ‘Addins’ menu in R Studio to obtain a
list of all the places your script doesn’t comply with the style guide.
You can then change your code to comply. - <code>styler</code>: The
‘Style active file’ command (also accessed through the Addins menu) or
‘Ctrl+Shift+A’ will do some of these changes for you. However, it is
worth rerunning <code>lintr</code> afterwards to check any remaining
issues. Additionally, the <code>styler::style_dir()</code> command will
style all files in a given directory, speeding up the process somewhat.
Note: before you use <code>styler</code> you will need to tell it which
style guide to use through ‘Addins &gt; Set style &gt;
styler::tidyverse_style()’.</p>
<p>In futur, we hope to have <code>lintr</code> run automatically when
you commit through the use of <a
href="https://www.google.com/search?q=wha+tare+commit+hooks&amp;safe=active&amp;sca_esv=573154237&amp;sxsrf=AM9HkKkwVTiv4E_4QYR5aZSJRG3wVKhkJw%3A1697192837676&amp;ei=hRspZZ_wKOO28gLsu5j4AQ&amp;ved=0ahUKEwjfxtGB6PKBAxVjm1wKHewdBh8Q4dUDCBA&amp;uact=5&amp;oq=wha+tare+commit+hooks&amp;gs_lp=Egxnd3Mtd2l6LXNlcnAiFXdoYSB0YXJlIGNvbW1pdCBob29rczIHEAAYDRiABDIIEAAYCBgeGA0yCBAAGIoFGIYDMggQABiKBRiGA0idFVDsCFjqE3ADeAGQAQKYAdEBoAHXCKoBBTQuNC4xuAEDyAEA-AEBwgIKEAAYRxjWBBiwA8ICBxAjGLACGCfCAgYQABgHGB7CAggQABgIGAcYHsICChAhGKABGMMEGAriAwQYACBBiAYBkAYI&amp;sclient=gws-wiz-serp#fpstate=ive&amp;vld=cid:2ebd25be,vid:d70a8PXbrb8,st:0">commit
hooks</a>, which will also automate our unit tests.</p>
<p>We may also adapt the <code>tidyverse</code> style guide for our own
needs, as we have started to do below, but this should be automatic
through <code>lintr</code> and <code>styler</code>.</p>
</div>
<div id="coding-standards" class="section level2">
<h2>Coding Standards</h2>
<p>In addition to the <code>tidyverse</code> style guide you should
adopt the following practices:</p>
<ol style="list-style-type: decimal">
<li>We explicitly call packages rather than loading them.</li>
</ol>
<table>
<tr>
<th>
 
</th>
<th>
Do
</th>
<th>
 
</th>
<th>
Don’t
</th>
</tr>
<tr>
<td>
</td>
<td>
<pre class="r"><code>dplyr::select(...)</code></pre>
</td>
<td>
</td>
<td>
<pre class="r"><code>library(dplyr)

select(...)</code></pre>
</td>
</tr>
</table>
<ol start="2" style="list-style-type: decimal">
<li>Packages should only be those available on <a
href="https://cran.r-project.org/">CRAN</a></li>
<li>Generally we should be using the pipe operator (<code>%&gt;%</code>)
and tidyverse packages rather than loops. This means we need to load the
<code>magrittr</code> package.</li>
<li>Variable names must make sense in plain English
e.g. <code>localAuthorityPopulation</code> not <code>lapop</code>.</li>
<li>We should modularise our code as much as possible, i.e. discrete
parts of the code that do a particular job should be contained in a
function. The end goal is to have the whole model run from one main file
that calls functions.</li>
</ol>
<p>We have a PowerPoint with further information on our <a
href="https://defra.sharepoint.com/:p:/r/teams/Team1478/_layouts/15/Doc.aspx?sourcedoc=%7B98C3D254-86E8-44FD-BB2E-206B37F6F802%7D&amp;file=Coding%20Standards.pptx&amp;action=edit&amp;mobileredirect=true">coding
standards</a>.</p>
</div>
<div id="naming-conventions" class="section level1">
<h1>Naming Conventions</h1>
<ol style="list-style-type: decimal">
<li>Github repositories should be all lower case with underscores “_”
instead of spaces.</li>
<li>R Script names should be camel case
(e.g. <em>apportionEnglishTonnage.R</em>) with no spaces.</li>
<li>Input files should keep the name they are received with wherever
possible to aid trace-ability.</li>
<li>Output files should be named after the</li>
</ol>
</div>
<div id="ons-guidance" class="section level1">
<h1>ONS Guidance</h1>
<p>Generally, the <a
href="https://best-practice-and-impact.github.io/qa-of-code-guidance/intro.html">Duck
Book</a> should inform how we work.</p>
<p>The book’s guidance is embedded in these pages but here are some
important points to peruse:</p>
<ul>
<li>The three pillars of rigourous analysis…
<ul>
<li>Reproducible analysis: “the same analysis steps performed on the
same dataset consistently produces the same result”</li>
<li>Auditable analysis: “analysis and supporting evidence are available
for scrutiny”</li>
<li>Assured analysis: “analysis has passed through a systematic process
that established it as fit for purpose”</li>
</ul></li>
<li>On good coding practice…
<ul>
<li>Not following good practices creates ‘technical debt’, which slows
down further development of the analysis.</li>
</ul></li>
<li>On where documentation belongs…
<ul>
<li>Pipelines should be well documented, and that documentation should
be embedded in our code. This makes collaboration easier, as well as
allowing for easier auditing and assurance. When documentation exists
alongside the code, it is more likely to be kept up to date than if it
is spread out across different systems. Having the documentation as part
of the code means we have a single source of the truth.</li>
</ul></li>
<li>On automating QA…
<ul>
<li>We should automate the aspects of quality assurance that are
challenging for humans. This frees up time and makes it easier to keep a
record of what QA has been performed. The purpose of this automation is
not to get rid of analysts, but to allow analysts to focus on the QA
that computers cannot easily do. For example, analysts are much better
at ensuring that the analysis is fit for purpose.<br />
</li>
</ul></li>
<li>On Agile working…
<ul>
<li>In Agile, working software is considered the primary measure of
success. This means that we don’t spend months creating detailed plans
and documenting specifications. Instead, we prioritise early and
continuous delivery of working software.</li>
</ul></li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
